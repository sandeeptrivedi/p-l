<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive P&L Marketer's Playbook</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals (Stone & Amber) -->
    <!-- Application Structure Plan: The SPA is designed as an interactive hub, not a linear document, to better serve its purpose as a reference guide. A persistent sidebar navigation allows users to jump between four key thematic areas: 'Core Concepts', 'Channel Playbooks', 'Operational Toolkit', and the 'POAS vs. ROAS' simulator. This non-linear structure respects the user's need to quickly reference specific information (e.g., look up a formula, check a channel tactic) without scrolling through irrelevant text. The key interactions are centered around dynamic calculators and togglable content, turning passive reading into active learning and exploration. -->
    <!-- Visualization & Content Choices: 
        - P&L Deconstructor: Report Info (P&L structure) -> Goal (Inform) -> Viz (Interactive HTML diagram) -> Interaction (Click to reveal definitions) -> Justification (Makes a dry financial statement explorable and less intimidating).
        - Unit Economics Explorer: Report Info (CAC, LTV formulas) -> Goal (Relationships) -> Viz (Bar Chart + Sliders) -> Interaction (User manipulates sliders to see real-time impact on CAC vs LTV chart) -> Justification (Transforms abstract formulas into a tangible, cause-and-effect simulation) -> Library (Chart.js).
        - POAS vs ROAS Simulator: Report Info (POAS formula/example) -> Goal (Compare) -> Viz (Bar Chart + Input fields) -> Interaction (User inputs campaign data to compare POAS side-by-side) -> Justification (Clearly demonstrates the superiority of POAS over ROAS in a practical way) -> Library (Chart.js).
        - Channel Playbooks: Report Info (Channel tactics) -> Goal (Organize) -> Viz (Clickable cards) -> Interaction (Clicking a card reveals the relevant strategy) -> Justification (Provides quick, organized access to channel-specific information without cluttering the UI).
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body { font-family: 'Inter', sans-serif; }
        .nav-link { transition: all 0.2s ease-in-out; }
        .nav-link.active { background-color: #f59e0b; color: white; }
        .nav-link:not(.active):hover { background-color: #fef3c7; color: #78350f; }
        .content-section { display: none; }
        .content-section.active { display: block; }
        .chart-container { position: relative; width: 100%; max-width: 600px; margin-left: auto; margin-right: auto; height: 300px; max-height: 40vh; }
        .calculator-card { backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); }
        .concept-item { cursor: pointer; }
    </style>
</head>
<body class="bg-stone-100 text-stone-800">

    <div class="flex flex-col md:flex-row min-h-screen">
        <!-- Sidebar Navigation -->
        <nav class="w-full md:w-64 bg-white border-r border-stone-200 p-4 md:p-6 flex-shrink-0">
            <h1 class="text-2xl font-bold text-amber-600 mb-8">P&L Playbook</h1>
            <ul class="space-y-2">
                <li><a href="#" class="nav-link flex items-center p-3 rounded-lg font-medium" data-target="home">
                    <span class="mr-3">üè†</span> Home
                </a></li>
                <li><a href="#" class="nav-link flex items-center p-3 rounded-lg font-medium" data-target="concepts">
                    <span class="mr-3">üß†</span> Core Concepts
                </a></li>
                <li><a href="#" class="nav-link flex items-center p-3 rounded-lg font-medium" data-target="channels">
                    <span class="mr-3">üì°</span> Channel Playbooks
                </a></li>
                <li><a href="#" class="nav-link flex items-center p-3 rounded-lg font-medium" data-target="toolkit">
                    <span class="mr-3">üõ†Ô∏è</span> Operational Toolkit
                </a></li>
                <li><a href="#" class="nav-link flex items-center p-3 rounded-lg font-medium" data-target="poas">
                    <span class="mr-3">üí°</span> POAS vs ROAS Sim
                </a></li>
            </ul>
        </nav>

        <!-- Main Content -->
        <main class="flex-1 p-4 sm:p-6 lg:p-10 bg-stone-50 overflow-y-auto">

            <!-- Home Section -->
            <section id="home" class="content-section">
                <div class="max-w-4xl mx-auto">
                    <h2 class="text-4xl font-bold mb-4">A Shift in Mindset</h2>
                    <p class="text-lg text-stone-600 mb-8">This playbook is your guide to evolving from a campaign technician focused on surface-level metrics to a business owner who drives real profit. Your new North Star is **Margin**. Your new language is that of the CFO. Welcome to the P&L.</p>
                    
                    <div class="grid md:grid-cols-2 gap-8 text-center">
                        <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200">
                            <h3 class="text-2xl font-semibold text-stone-500 mb-3">The Technician</h3>
                            <p class="text-stone-600 mb-4">Focuses on campaign-level metrics, often in isolation.</p>
                            <div class="space-y-2">
                                <span class="inline-block bg-amber-100 text-amber-800 px-3 py-1 rounded-full text-sm font-medium">CTR</span>
                                <span class="inline-block bg-amber-100 text-amber-800 px-3 py-1 rounded-full text-sm font-medium">CPC</span>
                                <span class="inline-block bg-amber-100 text-amber-800 px-3 py-1 rounded-full text-sm font-medium">CPA</span>
                            </div>
                        </div>
                        <div class="bg-amber-600 text-white p-6 rounded-xl shadow-lg">
                            <h3 class="text-2xl font-semibold mb-3">The Owner</h3>
                            <p class="opacity-90 mb-4">Focuses on business outcomes and profitability.</p>
                            <div class="space-y-2">
                                <span class="inline-block bg-amber-500 px-3 py-1 rounded-full text-sm font-medium">Contribution Margin</span>
                                <span class="inline-block bg-amber-500 px-3 py-1 rounded-full text-sm font-medium">LTV:CAC Ratio</span>
                                <span class="inline-block bg-amber-500 px-3 py-1 rounded-full text-sm font-medium">POAS</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Core Concepts Section -->
            <section id="concepts" class="content-section">
                <h2 class="text-4xl font-bold mb-4">Core Concepts</h2>
                <p class="text-lg text-stone-600 mb-12">This is the bedrock of your financial acumen. Master these concepts to understand the language of the business and your direct impact on profitability.</p>

                <div class="grid lg:grid-cols-5 gap-8">
                    <!-- P&L Deconstructor -->
                    <div class="lg:col-span-2 bg-white p-6 rounded-xl shadow-sm border border-stone-200">
                        <h3 class="text-2xl font-semibold mb-4">P&L Deconstructor</h3>
                        <p class="text-sm text-stone-500 mb-6">Click on any item to see its definition and relevance to your role.</p>
                        <div id="pnl-deconstructor" class="space-y-2 text-sm">
                            <div class="concept-item p-3 rounded-lg hover:bg-stone-100" data-concept="revenue">Revenue (Sales)</div>
                            <div class="pl-4">
                                <div class="concept-item p-3 rounded-lg hover:bg-stone-100" data-concept="cogs">- Cost of Goods Sold (COGS)</div>
                            </div>
                            <div class="concept-item p-3 rounded-lg font-semibold bg-amber-100" data-concept="gross_profit">= Gross Profit</div>
                            <div class="pl-4">
                                <div class="concept-item p-3 rounded-lg hover:bg-stone-100" data-concept="opex">- Operating Expenses</div>
                                <div class="pl-8">
                                    <div class="concept-item p-3 rounded-lg hover:bg-stone-100 font-semibold" data-concept="s_and_m">‚Ü≥ Sales & Marketing</div>
                                    <div class="concept-item p-3 rounded-lg hover:bg-stone-100" data-concept="r_and_d">‚Ü≥ R&D</div>
                                    <div class="concept-item p-3 rounded-lg hover:bg-stone-100" data-concept="g_and_a">‚Ü≥ G&A</div>
                                </div>
                            </div>
                            <div class="concept-item p-3 rounded-lg font-semibold bg-amber-100" data-concept="operating_income">= Operating Income</div>
                        </div>
                    </div>
                    <div id="concept-details" class="lg:col-span-3 bg-amber-50 p-6 rounded-xl">
                        <h4 id="concept-title" class="text-xl font-bold text-amber-800">Select an item</h4>
                        <p id="concept-text" class="text-amber-900 mt-2">The definition and your role in it will appear here.</p>
                    </div>
                </div>

                <hr class="my-12 border-stone-200">

                <!-- Unit Economics Explorer -->
                <h3 class="text-2xl font-semibold mb-4">Unit Economics Explorer</h3>
                <p class="text-stone-600 mb-8">Analyze profitability at the level of a single customer. Move the sliders to see how different variables impact the LTV:CAC ratio, the golden rule of sustainable growth.</p>
                <div class="grid lg:grid-cols-2 gap-8 items-center">
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200 calculator-card">
                        <div class="space-y-6">
                            <div>
                                <label for="total-spend" class="font-medium text-sm">Total Marketing Spend (‚Çπ)</label>
                                <input type="range" id="total-spend" min="10000" max="500000" value="100000" class="w-full h-2 bg-stone-200 rounded-lg appearance-none cursor-pointer">
                                <span id="total-spend-value" class="text-amber-600 font-semibold"></span>
                            </div>
                            <div>
                                <label for="new-customers" class="font-medium text-sm">New Customers Acquired</label>
                                <input type="range" id="new-customers" min="10" max="2000" value="100" class="w-full h-2 bg-stone-200 rounded-lg appearance-none cursor-pointer">
                                <span id="new-customers-value" class="text-amber-600 font-semibold"></span>
                            </div>
                             <div>
                                <label for="avg-purchase-value" class="font-medium text-sm">Avg. Purchase Value (‚Çπ)</label>
                                <input type="range" id="avg-purchase-value" min="500" max="10000" value="3000" class="w-full h-2 bg-stone-200 rounded-lg appearance-none cursor-pointer">
                                <span id="avg-purchase-value-value" class="text-amber-600 font-semibold"></span>
                            </div>
                            <div>
                                <label for="avg-purchase-freq" class="font-medium text-sm">Avg. Yearly Purchases</label>
                                <input type="range" id="avg-purchase-freq" min="1" max="12" value="2" class="w-full h-2 bg-stone-200 rounded-lg appearance-none cursor-pointer">
                                <span id="avg-purchase-freq-value" class="text-amber-600 font-semibold"></span>
                            </div>
                            <div>
                                <label for="customer-lifespan" class="font-medium text-sm">Avg. Customer Lifespan (Years)</label>
                                <input type="range" id="customer-lifespan" min="1" max="10" value="3" class="w-full h-2 bg-stone-200 rounded-lg appearance-none cursor-pointer">
                                <span id="customer-lifespan-value" class="text-amber-600 font-semibold"></span>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="grid grid-cols-2 gap-4 mb-4 text-center">
                            <div class="bg-amber-100 p-4 rounded-lg">
                                <div class="text-sm text-amber-800">LTV</div>
                                <div id="ltv-output" class="text-2xl font-bold text-amber-900"></div>
                            </div>
                            <div class="bg-stone-200 p-4 rounded-lg">
                                <div class="text-sm text-stone-600">CAC</div>
                                <div id="cac-output" class="text-2xl font-bold text-stone-800"></div>
                            </div>
                        </div>
                        <div class="chart-container h-64 sm:h-80">
                            <canvas id="ltv-cac-chart"></canvas>
                        </div>
                    </div>
                </div>

            </section>

            <!-- Channel Playbooks Section -->
            <section id="channels" class="content-section">
                <h2 class="text-4xl font-bold mb-4">Channel Playbooks</h2>
                <p class="text-lg text-stone-600 mb-12">Apply your P&L knowledge. Select a channel to see the recommended P&L approach and specific tactics to drive profitable growth.</p>
                <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
                    <!-- Channel Cards will be injected here by JS -->
                </div>
                <div id="channel-details-container" class="mt-8 bg-white p-6 rounded-xl shadow-sm border border-stone-200" style="display: none;">
                    <h3 id="channel-details-title" class="text-2xl font-semibold mb-4"></h3>
                    <p id="channel-details-approach" class="text-stone-600 mb-6 font-medium bg-amber-50 p-3 rounded-lg"></p>
                    <h4 class="font-semibold mb-3">Key Tactics:</h4>
                    <ul id="channel-details-tactics" class="list-disc list-inside space-y-2 text-stone-700">
                    </ul>
                </div>
            </section>

            <!-- Operational Toolkit Section -->
            <section id="toolkit" class="content-section">
                 <h2 class="text-4xl font-bold mb-4">Operational Toolkit</h2>
                 <p class="text-lg text-stone-600 mb-12">Strategy is nothing without execution. Use these tools and frameworks to build discipline, demonstrate impact, and drive your agenda forward.</p>
                
                <h3 class="text-2xl font-semibold mb-4">Your First 90 Days</h3>
                 <div class="flex border-b border-stone-200 mb-8">
                    <button class="tab-link active p-4 font-medium text-amber-600 border-b-2 border-amber-600" data-tab="month1">Month 1</button>
                    <button class="tab-link p-4 font-medium text-stone-500" data-tab="month2">Month 2</button>
                    <button class="tab-link p-4 font-medium text-stone-500" data-tab="month3">Month 3</button>
                </div>

                <div id="month1" class="tab-content active">
                    <h4 class="text-xl font-semibold">Audit, Learn, and Find Low-Hanging Fruit</h4>
                    <p class="mt-2 text-stone-600"><strong class="text-stone-800">Action:</strong> Conduct a full P&L audit of the top spending channels. Understand campaign profitability. Talk to the client. <strong class="text-stone-800">Goal:</strong> Identify and cut the most egregious sources of waste. Secure one quick win to build trust.</p>
                </div>
                <div id="month2" class="tab-content">
                    <h4 class="text-xl font-semibold">Optimize, Test, and Build</h4>
                    <p class="mt-2 text-stone-600"><strong class="text-stone-800">Action:</strong> Systematically A/B test ad copy, landing pages, and audiences on your most important campaigns. Build your P&L dashboard. <strong class="text-stone-800">Goal:</strong> Show demonstrable improvement in the contribution margin of at least one key channel.</p>
                </div>
                <div id="month3" class="tab-content">
                    <h4 class="text-xl font-semibold">Scale, Report, and Plan</h4>
                     <p class="mt-2 text-stone-600"><strong class="text-stone-800">Action:</strong> Reallocate the budget you saved in Month 1 to the most profitable campaigns. Start presenting your data-driven insights to the client. <strong class="text-stone-800">Goal:</strong> Establish yourself as a trusted, P&L-focused partner.</p>
                </div>
            </section>
            
            <!-- POAS vs ROAS Simulator -->
            <section id="poas" class="content-section">
                <h2 class="text-4xl font-bold mb-4">üí° POAS vs. ROAS Simulator</h2>
                <p class="text-lg text-stone-600 mb-12">ROAS can be misleading. A high ROAS can still be unprofitable. Profit on Ad Spend (POAS) is your new key metric. Use this simulator to see why.</p>
                
                <div class="grid md:grid-cols-2 gap-8 items-start">
                    <!-- Calculator Inputs -->
                    <div class="space-y-8">
                        <!-- Campaign A -->
                        <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200">
                            <h3 class="text-xl font-semibold mb-4 text-stone-700">Campaign A</h3>
                            <div class="space-y-4">
                                <div>
                                    <label for="a-spend" class="font-medium text-sm">Ad Spend (‚Çπ)</label>
                                    <input type="number" id="a-spend" value="10000" class="w-full mt-1 p-2 border border-stone-300 rounded-md">
                                </div>
                                <div>
                                    <label for="a-revenue" class="font-medium text-sm">Generated Revenue (‚Çπ)</label>
                                    <input type="number" id="a-revenue" value="50000" class="w-full mt-1 p-2 border border-stone-300 rounded-md">
                                </div>
                                <div>
                                    <label for="a-margin" class="font-medium text-sm">Product Margin (%)</label>
                                    <input type="number" id="a-margin" value="10" class="w-full mt-1 p-2 border border-stone-300 rounded-md">
                                </div>
                            </div>
                        </div>
                         <!-- Campaign B -->
                        <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200">
                            <h3 class="text-xl font-semibold mb-4 text-stone-700">Campaign B</h3>
                            <div class="space-y-4">
                                <div>
                                    <label for="b-spend" class="font-medium text-sm">Ad Spend (‚Çπ)</label>
                                    <input type="number" id="b-spend" value="10000" class="w-full mt-1 p-2 border border-stone-300 rounded-md">
                                </div>
                                <div>
                                    <label for="b-revenue" class="font-medium text-sm">Generated Revenue (‚Çπ)</label>
                                    <input type="number" id="b-revenue" value="30000" class="w-full mt-1 p-2 border border-stone-300 rounded-md">
                                </div>
                                <div>
                                    <label for="b-margin" class="font-medium text-sm">Product Margin (%)</label>
                                    <input type="number" id="b-margin" value="60" class="w-full mt-1 p-2 border border-stone-300 rounded-md">
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Chart & Outputs -->
                    <div class="bg-amber-50 p-6 rounded-xl">
                        <div class="grid grid-cols-2 gap-4 text-center mb-6">
                            <div>
                                <h4 class="font-semibold text-amber-900">Campaign A</h4>
                                <p class="text-sm text-amber-800">ROAS: <span id="a-roas"></span></p>
                                <p class="text-lg font-bold text-amber-800">POAS: <span id="a-poas"></span></p>
                                <p class="text-sm font-semibold">Gross Profit: <span id="a-profit"></span></p>
                            </div>
                             <div>
                                <h4 class="font-semibold text-amber-900">Campaign B</h4>
                                <p class="text-sm text-amber-800">ROAS: <span id="b-roas"></span></p>
                                <p class="text-lg font-bold text-amber-800">POAS: <span id="b-poas"></span></p>
                                <p class="text-sm font-semibold">Gross Profit: <span id="b-profit"></span></p>
                            </div>
                        </div>
                        <div class="chart-container h-64 sm:h-80">
                           <canvas id="poas-chart"></canvas>
                        </div>
                        <p id="poas-conclusion" class="mt-6 text-center font-medium text-amber-800"></p>
                    </div>
                </div>
            </section>

        </main>
    </div>

<script>
document.addEventListener('DOMContentLoaded', function () {
    // Data
    const conceptDetailsData = {
        revenue: { title: 'Revenue (Sales)', text: 'The top line. This is the total amount of money generated from the sales of products or services that your marketing efforts are designed to influence.' },
        cogs: { title: 'Cost of Goods Sold (COGS)', text: 'The direct costs of producing the goods sold by a company. Your marketing efficiency directly impacts how much gross profit is left after these costs.' },
        gross_profit: { title: 'Gross Profit', text: 'Revenue minus COGS. This is the pool of money available to pay for all operating expenses, including your marketing budget. Your goal is to maximize this.' },
        opex: { title: 'Operating Expenses', text: 'Costs a business incurs through its normal business operations. Sales & Marketing is a key component you control.' },
        s_and_m: { title: 'Sales & Marketing', text: 'This is your domain. It includes ad spend, agency fees, commissions, and marketing team salaries. You must justify this expense by generating sufficient Gross Profit.' },
        r_and_d: { title: 'Research & Development', text: 'Expenses related to the development of new products or services. Not directly in your control.' },
        g_and_a: { title: 'General & Administrative', text: 'The operational overhead of a company, like salaries for non-sales staff, rent, and utilities. Not directly in your control.' },
        operating_income: { title: 'Operating Income', text: 'Gross Profit minus all Operating Expenses. This is a key measure of a company's profitability from its core business. Your efficiency directly impacts this number.' }
    };

    const channelData = {
        'google-meta': { 
            title: 'Media Buying (Google & Meta)',
            approach: 'These are your volume drivers. The key is to segment campaigns not just by audience, but by profitability.',
            tactics: [
                'Use Value-Based Bidding to bid more for users likely to generate more revenue.',
                'Implement Offline Conversion Tracking for a true picture of business results.',
                'Leverage Meta's Conversions API (CAPI) for a complete view of the customer journey.',
                'Report on campaigns by Contribution Margin, not just CPA.'
            ]
        },
        'affiliate': {
            title: 'Affiliate & Partnership Marketing',
            approach: 'This is a pure Deep Performance play where you pay for results. The primary risk is fraud and low-quality traffic.',
            tactics: [
                'Implement Tiered Commission Structures to reward quality, not just quantity.',
                'Conduct aggressive Fraud Monitoring for click spamming and attribution theft.',
                'Include "Clawback Clauses" in contracts to reclaim commissions on fraudulent conversions.'
            ]
        },
        'direct': {
            title: 'Direct & Owned (SMS, WhatsApp)',
            approach: 'The primary goal here is retention and increasing LTV. The cost to reactivate a customer is almost always lower than acquiring a new one.',
            tactics: [
                'Create Funnel Drop-off Campaigns to nudge users towards completion.',
                'Measure Uplift with control groups to prove the true ROI of your campaigns.',
                'Calculate contribution margin as (Uplift Revenue - Campaign Cost).'
            ]
        },
        'emerging': {
            title: 'Emerging Channels (OEM, Truecaller)',
            approach: 'Channels for scale and reaching unique audiences. Start with pilots, prove profitability, then scale.',
            tactics: [
                'Negotiate "cost per first open" or "cost per registration" deals, not just "cost per install".',
                'Measure "cost per qualified conversation" on platforms like Truecaller.',
                'Use a strict Pilot Framework: Define Success -> Set Budget -> Track Everything -> Analyze & Decide.'
            ]
        }
    };
    
    // Navigation
    const navLinks = document.querySelectorAll('.nav-link');
    const contentSections = document.querySelectorAll('.content-section');

    function navigateTo(targetId) {
        contentSections.forEach(section => {
            section.classList.remove('active');
        });
        document.getElementById(targetId).classList.add('active');
        
        navLinks.forEach(link => {
            link.classList.remove('active');
            if (link.dataset.target === targetId) {
                link.classList.add('active');
            }
        });
    }

    navLinks.forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();
            const targetId = e.currentTarget.dataset.target;
            navigateTo(targetId);
        });
    });
    
    navigateTo('home');

    // Tab Navigation for Toolkit
    const tabLinks = document.querySelectorAll('.tab-link');
    const tabContents = document.querySelectorAll('.tab-content');

    tabLinks.forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();
            const tabId = e.currentTarget.dataset.tab;

            tabLinks.forEach(t => t.classList.remove('active', 'text-amber-600', 'border-amber-600'));
            e.currentTarget.classList.add('active', 'text-amber-600', 'border-amber-600');
            
            tabContents.forEach(content => {
                content.style.display = 'none';
                content.classList.remove('active');
            });

            const activeContent = document.getElementById(tabId);
            activeContent.style.display = 'block';
            activeContent.classList.add('active');
        });
    });


    // P&L Deconstructor Logic
    const pnlItems = document.querySelectorAll('.concept-item');
    const conceptTitle = document.getElementById('concept-title');
    const conceptText = document.getElementById('concept-text');
    const conceptDetailsContainer = document.getElementById('concept-details');

    pnlItems.forEach(item => {
        item.addEventListener('click', () => {
            const conceptKey = item.dataset.concept;
            const data = conceptDetailsData[conceptKey];
            
            pnlItems.forEach(i => i.classList.remove('bg-amber-200'));
            item.classList.add('bg-amber-200');

            conceptTitle.textContent = data.title;
            conceptText.textContent = data.text;
        });
    });

    // Unit Economics Explorer Logic
    const spendInput = document.getElementById('total-spend');
    const customersInput = document.getElementById('new-customers');
    const purchaseValueInput = document.getElementById('avg-purchase-value');
    const purchaseFreqInput = document.getElementById('avg-purchase-freq');
    const lifespanInput = document.getElementById('customer-lifespan');

    const spendValue = document.getElementById('total-spend-value');
    const customersValue = document.getElementById('new-customers-value');
    const purchaseValue = document.getElementById('avg-purchase-value-value');
    const purchaseFreqValue = document.getElementById('avg-purchase-freq-value');
    const lifespanValue = document.getElementById('customer-lifespan-value');

    const ltvOutput = document.getElementById('ltv-output');
    const cacOutput = document.getElementById('cac-output');

    let ltvCacChart;

    function formatCurrency(value) {
        return `‚Çπ${Math.round(value).toLocaleString('en-IN')}`;
    }

    function calculateUnitEconomics() {
        const spend = parseFloat(spendInput.value);
        const customers = parseFloat(customersInput.value);
        const avgValue = parseFloat(purchaseValueInput.value);
        const avgFreq = parseFloat(purchaseFreqInput.value);
        const lifespan = parseFloat(lifespanInput.value);

        spendValue.textContent = formatCurrency(spend);
        customersValue.textContent = customers.toLocaleString('en-IN');
        purchaseValue.textContent = formatCurrency(avgValue);
        purchaseFreqValue.textContent = `${avgFreq}x`;
        lifespanValue.textContent = `${lifespan} yr`;

        const cac = spend / customers;
        const ltv = avgValue * avgFreq * lifespan;
        
        cacOutput.textContent = formatCurrency(cac);
        ltvOutput.textContent = formatCurrency(ltv);
        
        updateLtvCacChart(ltv, cac);
    }

    function createLtvCacChart() {
        const ctx = document.getElementById('ltv-cac-chart').getContext('2d');
        ltvCacChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ['LTV vs. CAC'],
                datasets: [
                    {
                        label: 'LTV',
                        data: [0],
                        backgroundColor: '#c27803',
                        borderColor: '#92400e',
                        borderWidth: 1
                    },
                    {
                        label: 'CAC',
                        data: [0],
                        backgroundColor: '#d6d3d1',
                        borderColor: '#a8a29e',
                        borderWidth: 1
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: {
                            callback: function(value) { return `‚Çπ${value / 1000}k`; }
                        }
                    }
                },
                plugins: {
                    legend: { position: 'bottom' },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return `${context.dataset.label}: ${formatCurrency(context.raw)}`;
                            }
                        }
                    }
                }
            }
        });
    }
    
    function updateLtvCacChart(ltv, cac) {
        ltvCacChart.data.datasets[0].data[0] = ltv;
        ltvCacChart.data.datasets[1].data[0] = cac;
        ltvCacChart.update();
    }

    [spendInput, customersInput, purchaseValueInput, purchaseFreqInput, lifespanInput].forEach(input => {
        input.addEventListener('input', calculateUnitEconomics);
    });
    
    createLtvCacChart();
    calculateUnitEconomics();

    // Channel Playbooks Logic
    const channelsContainer = document.querySelector('#channels .grid');
    const channelDetailsContainer = document.getElementById('channel-details-container');
    const channelDetailsTitle = document.getElementById('channel-details-title');
    const channelDetailsApproach = document.getElementById('channel-details-approach');
    const channelDetailsTactics = document.getElementById('channel-details-tactics');

    const channelIcons = {
        'google-meta': 'üìä',
        'affiliate': 'ü§ù',
        'direct': 'üì±',
        'emerging': 'üöÄ'
    };

    Object.keys(channelData).forEach(key => {
        const channel = channelData[key];
        const card = document.createElement('div');
        card.className = 'channel-card bg-white p-4 rounded-xl shadow-sm border border-stone-200 hover:shadow-md hover:border-amber-400 cursor-pointer transition-all';
        card.dataset.channel = key;
        card.innerHTML = `<div class="text-2xl mb-2">${channelIcons[key]}</div><h4 class="font-semibold">${channel.title}</h4>`;
        channelsContainer.appendChild(card);
    });

    channelsContainer.addEventListener('click', (e) => {
        const card = e.target.closest('.channel-card');
        if (card) {
            const channelKey = card.dataset.channel;
            const data = channelData[channelKey];
            
            document.querySelectorAll('.channel-card').forEach(c => c.classList.remove('ring-2', 'ring-amber-500'));
            card.classList.add('ring-2', 'ring-amber-500');

            channelDetailsTitle.textContent = data.title;
            channelDetailsApproach.textContent = data.approach;
            channelDetailsTactics.innerHTML = '';
            data.tactics.forEach(tactic => {
                const li = document.createElement('li');
li.textContent = tactic;
                channelDetailsTactics.appendChild(li);
            });
            channelDetailsContainer.style.display = 'block';
        }
    });
    
    // POAS vs ROAS Simulator Logic
    const poasInputs = document.querySelectorAll('#poas input');
    let poasChart;

    function calculatePoas() {
        const aSpend = parseFloat(document.getElementById('a-spend').value) || 0;
        const aRevenue = parseFloat(document.getElementById('a-revenue').value) || 0;
        const aMargin = parseFloat(document.getElementById('a-margin').value) || 0;
        
        const bSpend = parseFloat(document.getElementById('b-spend').value) || 0;
        const bRevenue = parseFloat(document.getElementById('b-revenue').value) || 0;
        const bMargin = parseFloat(document.getElementById('b-margin').value) || 0;

        const aRoas = aSpend > 0 ? (aRevenue / aSpend) : 0;
        const aProfit = aRevenue * (aMargin / 100);
        const aPoas = aSpend > 0 ? (aProfit / aSpend) : 0;
        
        const bRoas = bSpend > 0 ? (bRevenue / bSpend) : 0;
        const bProfit = bRevenue * (bMargin / 100);
        const bPoas = bSpend > 0 ? (bProfit / bSpend) : 0;

        document.getElementById('a-roas').textContent = aRoas.toFixed(2) + 'x';
        document.getElementById('a-poas').textContent = aPoas.toFixed(2) + 'x';
        document.getElementById('a-profit').textContent = formatCurrency(aProfit);

        document.getElementById('b-roas').textContent = bRoas.toFixed(2) + 'x';
        document.getElementById('b-poas').textContent = bPoas.toFixed(2) + 'x';
        document.getElementById('b-profit').textContent = formatCurrency(bProfit);

        const conclusionEl = document.getElementById('poas-conclusion');
        if (aRoas > bRoas && bPoas > aPoas) {
            conclusionEl.textContent = "Notice Campaign A has a higher ROAS, but Campaign B is actually more profitable (higher POAS).";
        } else if (bRoas > aRoas && aPoas > bPoas) {
            conclusionEl.textContent = "Notice Campaign B has a higher ROAS, but Campaign A is actually more profitable (higher POAS).";
        } else {
            conclusionEl.textContent = "Adjust the numbers to see how ROAS can be a vanity metric.";
        }

        updatePoasChart(aPoas, bPoas);
    }

    function createPoasChart() {
         const ctx = document.getElementById('poas-chart').getContext('2d');
         poasChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ['Campaign A', 'Campaign B'],
                datasets: [{
                    label: 'POAS (Profit on Ad Spend)',
                    data: [0, 0],
                    backgroundColor: ['#f59e0b', '#78350f'],
                    borderColor: ['#d97706', '#92400e'],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                indexAxis: 'y',
                scales: {
                    x: {
                        beginAtZero: true,
                        ticks: {
                            callback: function(value) { return value.toFixed(1) + 'x'; }
                        }
                    }
                },
                 plugins: { legend: { display: false } }
            }
         });
    }

    function updatePoasChart(poasA, poasB) {
        poasChart.data.datasets[0].data = [poasA, poasB];
        poasChart.update();
    }

    poasInputs.forEach(input => input.addEventListener('input', calculatePoas));
    createPoasChart();
    calculatePoas();

});
</script>

</body>
</html>
Welcome to Online Text Editor (formerly EditPad.org) - your online plain text editor. Enter or paste your text here. To download and save it, click on the button below.